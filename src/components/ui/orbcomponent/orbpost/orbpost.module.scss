// orbpost.module.scss
// ---------------------------------------------------------
// OrbPost styles (refactored / documented)
// - Single source of truth for colors and spacing (variables)
// - Reused placeholders/mixins to remove repetition
// - Comments explain purposes and accessibility considerations
// - Keep class names unchanged so JS/TS imports continue to work
// ---------------------------------------------------------

// ----------------------------
// Theme / variables
// ----------------------------
$bg-hover: hsl(0, 0%, 10%);
$line-default: hsl(0, 0%, 20%);
$text-muted: hsl(0, 0%, 60%);
$text-subtle: hsl(0, 0%, 40%);
$white: #fff;

$like-color: #ec4899; // heart / like color
$like-bg: #501632; // liked button background (kept if needed)
$transition-fast: 160ms;
$transition-default: 0.2s;

$avatar-size: 3.8rem;
$avatar-line-top: 4.4rem;

// ----------------------------
// Reusable placeholders & mixins
// ----------------------------
%text-wrap {
  overflow-wrap: break-word; // allow natural wrap
  word-break: break-word;    // break long domains
  white-space: wrap;         // preserve line breaks inserted as <br/>
}

@mixin flex-it($dir: row, $jc: center, $ai: center) {
  display: flex;
  flex-direction: $dir;
  justify-content: $jc;
  align-items: $ai;
}

// ----------------------------
// Component: orbpost
// ----------------------------
.orbpost {
  display: flex;
  flex-direction: column;
  padding: 2rem 1rem 1.6rem 1.6rem;
  border-bottom: 0.1rem solid $line-default;
  width: 100%;
  max-width: 70rem;
  overflow: hidden;
  transition: $transition-default;
  // background-color: hsl(0, 0%, 14%); // keep if dark bg needed

  // Hover behaviour for whole post
  background-color: $bg-hover;
  &:hover {
    .orbpostwraper {
      .layer {
        .avatarwraper {
          .line {
            background-color: $line-default;
          }
        }
      }
    }
  }

  // ----------------------------
  // Layout wrapper
  // ----------------------------
  .orbpostwraper {
    display: flex;
    width: 100%;

    .layer {
      @include flex-it(row, space-between, flex-start);

      gap: 1.2rem;
      width: 100%;
      position: relative;

      // ----------------------------
      // Avatar / Vertical line
      // ----------------------------
      .avatarwraper {
        @include flex-it(column, center, center);
        gap: 1rem;
        position: relative;

        .avatar {
          height: $avatar-size;
          aspect-ratio: 1/1;
          border-radius: 10rem;
          pointer-events: none;
          user-select: none;
          object-fit: cover;
          display: inline-flex;
        }
      }

      // ----------------------------
      // Post content column
      // ----------------------------
      .postcontent {
        display: flex;
        flex-direction: column;
        gap: 0.2rem;
        width: 100%;

        .username {
          user-select: none;
          text-transform: lowercase;
          display: inline-flex;
          font-size: 1.72rem;
          font-weight: 600;
          align-items: center;
          color: $white;
          gap: 0.4rem;
          line-height: 100%;
          margin: 0 0 1.6rem 0;
          transition: all 0.1s ease-in-out;

          &:hover {
            color: hsl(0, 0%, 60%);
          }
        }

        // Post body / parsed content (reused text-wrap placeholder)
        .poststory {
          display: inline-flex;
          flex-direction: column;
          align-items: flex-start;
          font-size: 1.6rem;
          font-weight: 500;
          line-height: 146%;
          color: $text-muted;

          // paragraphs inside content renderer
          p,
          .postParagraph {
            @extend %text-wrap;
            margin: 0 0 0.8rem 0; // small spacing between paragraphs
          }
        }

        // Controls row (like + time + other actions)
        .usercontrols {
          display: flex;
          flex-direction: row;
          align-items: center;
          justify-content: space-between;

          .postedtime {
            margin-right: 1rem;
            font-size: 1.3rem;
            font-weight: 600;
            user-select: none;
            color: $text-subtle;
            display: none;
          }
        }
      }

      // ----------------------------
      // "More" button (kept absolute to top-right of layer)
      // ----------------------------
      .moreicon {
        @include flex-it(row, center, center);
        background: none;
        cursor: pointer;
        position: absolute;
        top: 0;
        right: 0;
        font-size: 1.46rem;
        font-weight: 600;
        align-items: center;
        color: #929292;
        gap: 0.4rem;
        line-height: 100%;
      }
    }
  }
}

// ----------------------------
// Inline links and text utilities
// ----------------------------
.inlineLink {
  display: inline-block;
  @extend %text-wrap;
  text-wrap: wrap; // best-effort; keep for legacy support
  color: #1B90D6; // default inline link color (JS may override)
  text-decoration: none;
  font-weight: 500;
}

// also keep a generic rule for .postParagraph in case other components use it
.postParagraph {
  @extend %text-wrap;
}

// ----------------------------
// Like / Heart styles
// - Consolidated duplicate .likebtn rules into a single block
// ----------------------------
.likebtn {
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  background: transparent;
  border: none;
  user-select: none;
  box-sizing: content-box;
  padding: 0.3rem;
  overflow: visible;
  font-size: 1.5rem;
  font-weight: 600;
  line-height: 100%;
  gap: 1rem;
  border-radius: 10rem;
  transition: all $transition-fast, transform 120ms ease, color $transition-fast;
  color: #929292;

  // Svg / heart icon base
  .hearticon,
  svg {
    display: flex;
    height: 1.7rem;
    width: auto;
    fill: transparent; // default: unfilled
    stroke: currentColor;
    transition: fill $transition-fast, stroke $transition-fast, transform $transition-fast;
    vector-effect: non-scaling-stroke;
  }

  &:hover {
    .hearticon {
      stroke: $like-color;
    }
  }

  &:focus {
    outline: none;
  }
}

// liked state (applies when .liked is added to parent/button)
.liked {
  color: $like-color;

  .hearticon,
  svg {
    fill: $like-color;
  }
}

.heartContainer {
  display: flex;
  align-items: center;
  justify-content: center;
}

// ----------------------------
// Like control layout
// ----------------------------
.likecontrol {
  display: flex;
  flex-direction: row;
  align-items: center;
  gap: 0.6rem;
  margin: 1rem 0 0 0;
}

.liketext {
  font-weight: 500;
  font-size: 1.4rem;
  color: inherit; // inherits color from parent (.liked or default)
  user-select: none;
  transition: color $transition-fast;
}

// ----------------------------
// Small utilities / animation-related elements
// ----------------------------
.likePing {
  position: absolute;
  inset: 0;
  border-radius: 9999px;
  pointer-events: none;
  /* background is controlled inline in React (gradient) */
}

// ----------------------------
// Accessibility notes (docs only â€” not processed by SCSS)
// ----------------------------
// - Use aria-pressed on like button to indicate toggle state.
// - Provide accessible labels for interactive icons (aria-label).
// - Keep color contrast checks in mind; adjust $like-color or background if failing checks.
// ---------------------------------------------------------
